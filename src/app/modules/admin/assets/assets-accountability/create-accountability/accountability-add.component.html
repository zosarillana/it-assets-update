<form
    [formGroup]="eventForm"
    (ngSubmit)="onSubmit()"
    class="absolute inset-0 flex flex-col min-w-0 overflow-hidden"
>
    <mat-drawer-container class="flex-auto h-full">
        <!-- Drawer -->
        <mat-drawer
            class="w-90 dark:bg-gray-900"
            [autoFocus]="false"
            [mode]="drawerMode"
            [opened]="drawerOpened"
            #matDrawer
        >
            <div class="flex flex-col items-start p-8 border-b">
                <!-- Back to courses -->
                <a
                    class="inline-flex items-center leading-6 text-primary hover:underline"
                    [routerLink]="['..']"
                >
                    <span class="inline-flex items-center">
                        <mat-icon
                            class="icon-size-5 text-current"
                            [svgIcon]="'heroicons_solid:arrow-sm-left'"
                        ></mat-icon>
                        <span class="ml-1.5 font-medium leading-5"
                            >Back to lists</span
                        >
                    </span>
                </a>
                <!-- Course title & description -->
                <div class="mt-7 text-2xl font-semibold">
                    Add Accountability
                </div>
                <div class="text-secondary">
                    Select a computer and fill the employee details to create a
                    accountability form.
                </div>
            </div>

            <!-- Steps -->
            <div class="py-2 px-8">
                <ol>
                    <div class="mt-2 flex flex-col gap-2">
                        <mat-label class="font-semibold">
                            Search Computer
                        </mat-label>
                        <mat-form-field class="fuse-mat-no-subscript w-full uppercase">
                            <mat-icon
                                matPrefix
                                class="icon-size-5"
                                [svgIcon]="'heroicons_solid:search'"
                            ></mat-icon>
                            <input
                                matInput
                                class="text-sm uppercase"
                                placeholder="Search..."
                                formControlName="typeComputerControl"
                                [matAutocomplete]="auto"
                            />
                            <mat-autocomplete
                            class="uppercase"
                                #auto="matAutocomplete"
                                [displayWith]="displayFn"
                                (optionSelected)="
                                    onTypeSelected($event.option.value)
                                "
                            >
                                <mat-option
                                    *ngFor="
                                        let option of filteredComputerOptions
                                            | async
                                    "
                                    [value]="option"
                                >
                                    {{ option.asset_barcode }} -
                                    {{ option.model }}
                                </mat-option>
                            </mat-autocomplete>
                        </mat-form-field>

                        <mat-divider class="border-gray-200 my-2"></mat-divider>

                        <mat-label class="text-md font-semibold"
                            >User Details</mat-label
                        >
                        <mat-label class="text-secondary -mt-2 mb-2 text-sm">
                            (Fill up user details)
                        </mat-label>
                        <div class="flex flex-col flex-grow">
                            <div class="flex flex-col">
                                <mat-form-field appearance="fill">
                                    <mat-icon
                                        svgIcon="feather:credit-card"
                                        class="icon-size-3 md:icon-size-4 mr-2"
                                    ></mat-icon>
                                    <input
                                        matInput
                                        formControlName="employee_id"
                                        type="number"
                                        id="employee_id"
                                        placeholder="Enter employee id..."
                                        class="text-xs md:text-sm uppercase"
                                        (keydown)="validateNumber($event)"
                                        class="no-spinner text-sm uppercase"
                                    />
                                </mat-form-field>
                            </div>
                            <div class="flex flex-col">
                                <mat-form-field appearance="fill">
                                    <mat-icon
                                        svgIcon="feather:user"
                                        class="icon-size-3 md:icon-size-4 mr-2"
                                    ></mat-icon>
                                    <input
                                        matInput
                                        formControlName="name"
                                        id="name"
                                        placeholder="Enter fullname..."
                                        class="text-xs md:text-sm uppercase"
                                    />
                                </mat-form-field>
                            </div>
                            <!-- <div class="flex flex-col">
                                <mat-form-field appearance="fill">
                                    <mat-icon
                                        svgIcon="mat_outline:domain"
                                        class="icon-size-3 md:icon-size-4 mr-2"
                                    ></mat-icon>
                                    <input
                                        matInput
                                        formControlName="business_unit"
                                        id="business_unit"
                                        placeholder="Enter business unit..."
                                        class="text-xs md:text-sm"
                                    />
                                </mat-form-field>
                            </div> -->
                            <div class="flex flex-col">
                                <mat-form-field appearance="fill">
                                    <mat-icon
                                        svgIcon="mat_outline:info"
                                        class="icon-size-3 md:icon-size-4 mr-2"
                                    ></mat-icon>
                                    <input
                                        matInput
                                        formControlName="company"
                                        id="company"
                                        placeholder="Enter company..."
                                        class="text-xs md:text-sm uppercase"
                                    />
                                </mat-form-field>
                            </div>
                        </div>
                        <!-- Right Column -->
                        <div class="flex flex-col flex-grow">
                            <div class="flex flex-col">
                                <mat-form-field>
                                    <input
                                        matInput
                                        [matDatepicker]="picker"
                                        [formControlName]="'date_hired'"
                                        placeholder=" Date Hired: MM-DD-YYYY"
                                        (click)="picker.open()"
                                        class="cursor-pointer text-sm uppercase"
                                        required
                                    />
                                    <mat-icon
                                        matPrefix
                                        svgIcon="mat_outline:calendar_today"
                                        class="icon-size-4 cursor-pointer"
                                        (click)="picker.open()"
                                    >
                                        <!-- calendar_today -->
                                    </mat-icon>

                                    <mat-datepicker #picker></mat-datepicker>
                                </mat-form-field>
                            </div>
                            <!-- <div class="flex flex-col">
                                <mat-form-field>
                                    <input
                                        matInput
                                        [matDatepicker]="picker2"
                                        [formControlName]="
                                            'date_resignation'
                                        "
                                       placeholder="MM-DD-YYYY"
                                        (click)="picker2.open()"
                                        class="cursor-pointer text-sm"
                                        required
                                    />
                                    <mat-icon
                                        matPrefix
                                        svgIcon="mat_outline:calendar_today"
                                        class="icon-size-4 cursor-pointer"
                                        (click)="picker2.open()"
                                    >                                             
                                    </mat-icon>

                                    <mat-datepicker
                                        #picker2
                                    ></mat-datepicker>
                                </mat-form-field>
                            </div> -->
                            <div class="flex flex-col">
                                <mat-form-field appearance="fill">
                                    <mat-icon
                                        svgIcon="mat_outline:business_center"
                                        class="icon-size-3 md:icon-size-4 mr-2"
                                    ></mat-icon>
                                    <input
                                        matInput
                                        formControlName="designation"
                                        id="designation"
                                        placeholder="Enter designation..."
                                        class="text-xs md:text-sm uppercase"
                                    />
                                </mat-form-field>
                            </div>
                            <div class="flex flex-col uppercase">
                                <mat-form-field appearance="fill" >
                                    <mat-icon
                                        svgIcon="mat_outline:domain"
                                        class="icon-size-3 md:icon-size-4 mr-2"
                                    ></mat-icon>
                                    <mat-select
                                        formControlName="department"
                                        id="department"
                                        class="text-sm text-gray-400"
                                        [placeholder]="'Select Department'"
                                    >
                                        <mat-option value="" disabled
                                            >Select Department</mat-option
                                        >
                                        <mat-option
                                            *ngFor="
                                                let department of departments
                                            "
                                            [value]="department"
                                        >
                                            {{ department.code }} -
                                            {{ department.description }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>

                                <button
                                    class="px-6"
                                    mat-flat-button
                                    type="submit"
                                    [color]="'primary'"
                                >
                                    <mat-icon
                                        class="icon-size-4"
                                        svgIcon="mat_solid:subdirectory_arrow_right"
                                    ></mat-icon>
                                    <span class="ml-1 text-sm">
                                        Create Form</span
                                    >
                                </button>
                            </div>
                        </div>
                    </div>
                </ol>
            </div>
        </mat-drawer>

        <!-- Drawer content -->
        <mat-drawer-content class="flex flex-col overflow-hidden">
            <!-- Header -->
            <div
                class="lg:hidden flex flex-0 items-center py-2 pl-4 pr-6 sm:py-4 md:pl-6 md:pr-8 border-b lg:border-b-0 bg-card dark:bg-transparent"
            >
                <!-- Title & Actions -->
                <button mat-icon-button [routerLink]="['..']">
                    <mat-icon
                        [svgIcon]="'heroicons_outline:arrow-sm-left'"
                    ></mat-icon>
                </button>
                <h2
                    class="ml-2.5 text-md sm:text-xl font-medium tracking-tight truncate"
                >
                    Accountability Details
                </h2>
            </div>
            <mat-progress-bar
                class="hidden lg:block flex-0 h-0.5 w-full"              
            ></mat-progress-bar>
            <!-- [value]="(100 * (currentStep + 1)) / course.totalSteps" -->
            <!-- Main -->
            <div class="flex-auto overflow-y-auto" cdkScrollable>
                <!-- Steps -->
                <mat-tab-group
                    class="fuse-mat-no-header"
                    [animationDuration]="'200'"
                    #courseSteps
                >
                    <mat-tab>
                        <ng-template matTabContent>
                            <div
                                class="mx-auto inset-0 min-w-0 text-center overflow-auto print:overflow-visible"
                                cdkScrollable
                            >
                                <!-- A4 Wrapper -->
                                <div class="a4-container">
                                    <!-- Page Content -->
                                    <div
                                        class="inline-block p-6 sm:p-10 text-left print:p-0"
                                    >
                                        <div
                                            class="w-240 min-w-240 p-16 rounded-2xl shadow bg-card print:w-auto print:p-0 print:rounded-none print:shadow-none print:bg-transparent"
                                        >
                                            <div id="pdfFormArea" #pdfFormArea>
                                                <div class="flex">
                                                    <div
                                                        class="flex flex-row gap-4 w-full"
                                                    >
                                                        <div class="flex gap-4">
                                                            <img
                                                                src="assets/images/logo/suylogo.png"
                                                                alt="Logo"
                                                                class="-ml-5 -mt-5 h-32 w-32"
                                                            />
                                                            <div
                                                                class="flex flex-col w-64 gap-1"
                                                            >
                                                                <p
                                                                    class="font-bold text-sm"
                                                                >
                                                                    Ana's
                                                                    Breeders
                                                                    Farm Inc.
                                                                </p>
                                                                <p
                                                                    class="text-sm w-56"
                                                                >
                                                                    Sitio Sto.
                                                                    Niño, Pan
                                                                    Philippine
                                                                    Highway
                                                                    Brgy.
                                                                    Binugao,
                                                                    Toril
                                                                    District
                                                                    Davao City,
                                                                    Davao del
                                                                    Sur,
                                                                    Philippines.
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- Right-aligned Document Details -->
                                                    <div
                                                        class="flex flex-row gap-4 w-full justify-end"
                                                    >
                                                        <div
                                                            class="flex flex-col w-64 gap-1 items-end"
                                                        >
                                                            <p
                                                                class="font-bold text-sm"
                                                            >
                                                                Document Number
                                                                <span
                                                                    class="font-medium"
                                                                    >A-60-FR-009</span
                                                                >
                                                            </p>
                                                            <p
                                                                class="font-bold text-sm"
                                                            >
                                                                Effective Date
                                                                <span
                                                                    class="font-medium"
                                                                    >{{
                                                                        asset
                                                                            ?.user_accountability_list
                                                                            .date_created
                                                                            ? (asset
                                                                                  ?.user_accountability_list
                                                                                  .date_created
                                                                              | date
                                                                                  : "MMMM d, y")
                                                                            : "N/A"
                                                                    }}</span
                                                                >
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>

                                                <p
                                                    class="flex justify-center text-2xl font-semibold w-full"
                                                >
                                                    ACCOUNTABILITY FORM
                                                </p>

                                                <div
                                                    class="flex flex-row w-full mx-auto mt-8 gap-12"
                                                >
                                                    <div
                                                        class="flex flex-col gap-0.5 w-58"
                                                    >
                                                        <p
                                                            class="text-lg tracking-tight font-bold"
                                                        >
                                                            ISSUED TO
                                                        </p>
                                                        <div
                                                            class="flex flex-row gap-2 text-sm"
                                                        >
                                                            <p
                                                                class="text-regular tracking-tight font-bold"
                                                            >
                                                                Employee Name
                                                            </p>
                                                            <span class="font-medium uppercase">{{ eventForm.get('name')?.value || 'N/A' }}</span>
                                                        </div>
                                                        <div
                                                            class="flex flex-row gap-10 text-sm"
                                                        >
                                                            <p
                                                                class="text-regular tracking-tight font-bold"
                                                            >
                                                                ID Number
                                                            </p>
                                                            <span class="font-medium uppercase"> {{ eventForm.get('employee_id')?.value || 'N/A' }}</span>
                                                        </div>
                                                        <div
                                                            class="flex flex-row gap-8 text-sm"
                                                        >
                                                            <p
                                                                class="text-regular tracking-tight font-bold"
                                                            >
                                                                Designation
                                                            </p>
                                                            <span class="font-medium uppercase"> {{ eventForm.get('designation')?.value || 'N/A' }}</span>
                                                        </div>
                                                    </div>
                                                    <div
                                                        class="flex flex-col gap-0.5 w-58 mt-7"
                                                    >
                                                        <div
                                                            class="flex flex-row gap-15 text-sm"
                                                        >
                                                            <p
                                                                class="text-regular tracking-tight font-bold"
                                                            >
                                                                Business Unit
                                                            </p>
                                                            <span class="font-medium uppercase"
                                                    >{{ eventForm.get('company')?.value || 'N/A' }}
                                                    </span
                                                >
                                                        </div>
                                                        <div
                                                            class="flex flex-row gap-11 text-sm"
                                                        >
                                                            <p
                                                                class="text-regular tracking-tight font-bold"
                                                            >
                                                                Department
                                                            </p>
                                                            <span class="font-medium uppercase">
                                                                {{ eventForm.get('department')?.value?.code || 'N/A' }} 
                                                             
                                                            </span>
                                                            
                                                        </div>
                                                        <div
                                                            class="flex flex-row gap-12 text-sm"
                                                        >
                                                            <p
                                                                class="text-regular tracking-tight font-bold"
                                                            >
                                                                Date Hired
                                                            </p>
                                                            <span class="ml-1.5 font-medium uppercase">
                                                                {{ eventForm.get('date_hired')?.value 
                                                                    ? (eventForm.get('date_hired')?.value | date: 'MMMM d, y') 
                                                                    : 'N/A' }}
                                                            </span>
                                                            
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Page Break (If Needed) -->
                                                <div class="page-break"></div>
                                                <div class="flex flex-col my-4">
                                                    <p
                                                        class="text-sm font-semibold mt-5"
                                                    >
                                                        Computer under
                                                        accountability
                                                    </p>
                                                    <span
                                                        class="text-secondary text-sm"
                                                    >
                                                        (Desktop, Laptops,
                                                        etc..)</span
                                                    >
                                                </div>
                                                <div
                                                    class="overflow-x-auto "
                                                >
                                                    <table
                                                        class="w-full text-xs"
                                                    >
                                                        <thead
                                                            class="text-gray-700"
                                                        >
                                                            <tr>
                                                                <th
                                                                    class="px-6 py-3 text-start bg-transparent uppercase"
                                                                >
                                                                    Type
                                                                </th>
                                                                <th
                                                                    class="px-6 py-3 text-start bg-transparent uppercase"
                                                                >
                                                                    Date
                                                                    Acquired
                                                                </th>
                                                                <th
                                                                    class="px-6 py-3 text-start bg-transparent uppercase"
                                                                >
                                                                    Barcode
                                                                </th>
                                                                <!-- <th class=" px-6 py-3 text-left bg-transparent">Serial Number</th> -->

                                                                <th
                                                                    class="px-6 py-3 text-start bg-transparent uppercase"
                                                                >
                                                                    Brand
                                                                </th>
                                                                <th
                                                                    class="px-6 py-3 text-start bg-transparent uppercase"
                                                                >
                                                                    Model
                                                                </th>
                                                                <th
                                                                    class="px-6 py-3 text-start bg-transparent uppercase"
                                                                >
                                                                    History
                                                                </th>
                                                                <th
                                                                    class="px-6 py-3 text-start bg-transparent uppercase"
                                                                >
                                                                    Status
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody class="bg-white">
                                                            <tr
                                                                *ngIf="
                                                                    selectedComputer;
                                                                    else noData
                                                                "
                                                                class="hover:bg-gray-100 transition duration-200"
                                                            >
                                                                <td
                                                                    class="px-6 py-3 bg-transparent uppercase"
                                                                >
                                                                    {{
                                                                        selectedComputer?.type ||
                                                                            "N/A"
                                                                    }}
                                                                </td>
                                                                <td
                                                                    class="px-6 py-3 bg-transparent uppercase"
                                                                >
                                                                    {{
                                                                        selectedComputer.date_acquired
                                                                            ? (selectedComputer.date_acquired
                                                                              | date
                                                                                  : "MMMM d, y")
                                                                            : "N/A"
                                                                    }}
                                                                </td>
                                                                <td
                                                                    class="px-6 py-3 bg-transparent uppercase"
                                                                >
                                                                    {{
                                                                        selectedComputer?.asset_barcode ||
                                                                            "N/A"
                                                                    }}
                                                                </td>
                                                                <!-- <td class=" px-6 py-3 bg-transparent">{{ selectedComputer?.serial_no || "N/A" }}</td> -->

                                                                <td
                                                                    class="px-6 py-3 bg-transparent uppercase"
                                                                >
                                                                    {{
                                                                        selectedComputer?.brand ||
                                                                            "N/A"
                                                                    }}
                                                                </td>
                                                                <td
                                                                    class="px-6 py-3 bg-transparent uppercase"
                                                                >
                                                                    {{
                                                                        selectedComputer?.model ||
                                                                            "N/A"
                                                                    }}
                                                                </td>
                                                                <td
                                                                    class="px-6 py-3 bg-transparent uppercase"
                                                                >
                                                                    {{
                                                                        selectedComputer
                                                                            .history
                                                                            ?.$values
                                                                            ?.length
                                                                            ? selectedComputer.history.$values.join(
                                                                                  ", "
                                                                              )
                                                                                  .length >
                                                                              50
                                                                                ? selectedComputer.history.$values
                                                                                      .join(
                                                                                          ", "
                                                                                      )
                                                                                      .substring(
                                                                                          0,
                                                                                          50
                                                                                      ) +
                                                                                  "..."
                                                                                : selectedComputer.history.$values.join(
                                                                                      ", "
                                                                                  )
                                                                            : "N/A"
                                                                    }}
                                                                </td>

                                                                <td
                                                                    class="px-6 py-3 bg-transparent uppercase"
                                                                >
                                                                    {{
                                                                        selectedComputer?.status ||
                                                                            "N/A"
                                                                    }}
                                                                </td>
                                                            </tr>
                                                            <!-- No Data Case -->
                                                            <ng-template
                                                                #noData
                                                            >
                                                                <tr>
                                                                    <td
                                                                        colspan="7"
                                                                        class="px-6 py-3 text-center  mc-auto text-gray-500 bg-transparent"
                                                                    >
                                                                        No
                                                                        Computer
                                                                        Available
                                                                    </td>
                                                                </tr>
                                                            </ng-template>
                                                        </tbody>
                                                    </table>

                                                    <div class="flex flex-col my-4">
                                                        <p class="text-sm font-semibold mt-5">
                                                            Computer Components under accountability
                                                        </p>
                                                        <span class="text-secondary text-sm"
                                                            >(Ram, ssd, hdd ...)</span
                                                        >
                                                    </div>

                                                    <table
                                                    class="w-full text-xs"
                                                >
                                                    <thead
                                                        class="text-gray-700"
                                                    >
                                                        <tr>
                                                            <th
                                                                class="px-6 py-3 text-start bg-transparent uppercase"
                                                            >
                                                                Type
                                                            </th>
                                                           
                                                            <th
                                                                class="px-6 py-3 text-start bg-transparent uppercase"
                                                            >
                                                                Inventory code
                                                            </th>
                                                            <th
                                                            class="px-6 py-3 text-start bg-transparent uppercase"
                                                        >
                                                            Date
                                                            Acquired
                                                        </th>
                                                            <!-- <th class=" px-6 py-3 text-left bg-transparent">Serial Number</th> -->

                                                            <th
                                                                class="px-6 py-3 text-start bg-transparent uppercase"
                                                            >
                                                                Description
                                                            </th>
                                                            <th
                                                                class="px-6 py-3 text-start bg-transparent uppercase"
                                                            >
                                                                Cost
                                                            </th>
                                                            <th
                                                                class="px-6 py-3 text-start bg-transparent uppercase"
                                                            >
                                                                Parent Barcode
                                                            </th>
                                                            <th
                                                                class="px-6 py-3 text-start bg-transparent uppercase"
                                                            >
                                                                Status
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody *ngIf="getComponentKeys(selectedComputer).length > 0; else noComponent" class="bg-white">
                                                        <ng-container *ngFor="let key of getComponentKeys(selectedComputer)">
                                                            <ng-container *ngIf="selectedComputer[key]?.values?.$values?.length">
                                                                <tr *ngFor="let item of selectedComputer[key].values.$values" class="hover:bg-gray-100 transition duration-200">
                                                                    <td class="px-6 py-3 bg-transparent uppercase">
                                                                        {{ key.toUpperCase() }} <!-- Component Type (RAM, HDD, etc.) -->
                                                                    </td>
                                                                
                                                                    <td class="px-6 py-3 bg-transparent uppercase">
                                                                        {{ item.uid || "N/A" }} <!-- Unique ID -->
                                                                    </td>
                                                                    <td class="px-6 py-3 bg-transparent uppercase">
                                                                        {{ item.date_acquired  ? (item.date_acquired
                                                                            | date
                                                                                : "MMMM d, y")
                                                                          : "N/A" }}
                                                                    </td>
                                                                    <td class="px-6 py-3 bg-transparent uppercase">
                                                                        {{ item.description || "N/A" }} <!-- Description -->
                                                                    </td>
                                                                    <td class="px-6 py-3 bg-transparent uppercase">
                                                                        {{ item.cost || "N/A" }} <!-- Description -->
                                                                    </td>
                                                                    <td class="px-6 py-3 bg-transparent uppercase">
                                                                        {{ item.parent_barcode || "N/A" }} <!-- Description -->
                                                                    </td>
                                                                    <td class="px-6 py-3 bg-transparent uppercase">
                                                                        {{ item.status || "N/A" }} <!-- Description -->
                                                                    </td>
                                                                </tr>
                                                            </ng-container>
                                                        </ng-container>
                                                    </tbody>
                                                    
                                                    
                                                    
                                                    <!-- No Data Case -->
                                                    <ng-template #noComponent>
                                                        <tbody>
                                                            <tr>
                                                                <td colspan="7" class="px-6 py-3 text-center text-gray-500 bg-transparent">
                                                                    No Components Available
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </ng-template>
                                                    
                                                    
                                                </table>
                                                <div class="flex flex-col my-4">
                                                    <p class="text-sm font-semibold mt-5">
                                                        Assets under accountability
                                                    </p>
                                                    <span class="text-secondary text-sm">
                                                        (Mouse, Keyboards etc..)</span
                                                    >
                                                </div>
                                                <table class="w-full text-xs">
                                                    <thead class="text-gray-700">
                                                        <tr>
                                                            <th class="px-6 py-3 text-start bg-transparent uppercase">Type</th>
                                                            <th class="px-6 py-3 text-start bg-transparent uppercase">Barcode</th>
                                                            <th class="px-6 py-3 text-start bg-transparent uppercase">Date Acquired</th>
                                                            <th class="px-6 py-3 text-start bg-transparent uppercase">Brand</th>
                                                            <th class="px-6 py-3 text-start bg-transparent uppercase">Model</th>
                                                            <th class="px-6 py-3 text-start bg-transparent uppercase">History</th>
                                                            <th class="px-6 py-3 text-start bg-transparent uppercase">Status</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody class="bg-white">
                                                        <ng-container *ngIf="selectedComputer?.assigned_assets?.values?.$values?.length; else noPeripherals">
                                                            <tr *ngFor="let asset of selectedComputer.assigned_assets.values.$values" 
                                                                class="hover:bg-gray-100 transition duration-200">
                                                                <td class="px-6 py-3 bg-transparent uppercase">{{ asset.type || "N/A" }}</td>
                                                              
                                                                <td class="px-6 py-3 bg-transparent uppercase">{{ asset.asset_barcode || "N/A" }}</td>
                                                                <td class="px-6 py-3 bg-transparent uppercase">{{ asset.date_acquired ? (asset.date_acquired
                                                                    | date
                                                                        : "MMMM d, y")
                                                                  : "N/A" }} </td>
                                                                  <td class="px-6 py-3 bg-transparent uppercase">{{ asset.brand || "N/A" }}</td>
                                                                  <td class="px-6 py-3 bg-transparent uppercase">{{ asset.model || "N/A" }}</td>
                                                                  <td class="px-6 py-3 bg-transparent uppercase">{{ asset.history
                                                                    ?.$values
                                                                    ?.length
                                                                    ? asset.history.$values.join(
                                                                          ", "
                                                                      )
                                                                          .length >
                                                                      50
                                                                        ? asset.history.$values
                                                                              .join(
                                                                                  ", "
                                                                              )
                                                                              .substring(
                                                                                  0,
                                                                                  50
                                                                              ) +
                                                                          "..."
                                                                        : asset.history.$values.join(
                                                                              ", "
                                                                          )
                                                                    : "N/A"
                                                            }}</td>
                                                                  <td class="px-6 py-3 bg-transparent uppercase">{{ asset.status || "N/A" }}</td>
                                                            </tr>
                                                        </ng-container>
                                                        
                                                        <ng-template #noPeripherals>
                                                            <tr>
                                                                <td colspan="7" class="px-6 py-3 text-center text-gray-500 bg-transparent">
                                                                    No Peripherals Available
                                                                </td>
                                                            </tr>
                                                        </ng-template>
                                                    </tbody>
                                                </table>
                                                
                                                
                                                </div>
                                            </div>

                                            <div
                                                id="acknowledgmentSection"
                                                #acknowledgmentSection
                                            >
                                                <div
                                                    class="flex flex-col w-full gap-4 mt-8 text-sm"
                                                >
                                                    <p>
                                                        I HEREBY ACKNOWLEDGE
                                                        RECEIPT OF AND ACCEPT
                                                        RESPONSIBILITY OF THE
                                                        ABOVE ASSETS ISSUED TO
                                                        ME IN ACCORDANCE WITH
                                                        THE COMPANY POLICY AND
                                                        PROCEDURES. UPON
                                                        SEPARATION FROM THE
                                                        COMPANY, I WILL RETURN
                                                        THE ITEM(S) ISSUED TO ME
                                                        IN GOOD WORKING
                                                        CONDITION (SUBJECT TO
                                                        ASSESMENT OF ASSET'S
                                                        WEAR AND TEAR).
                                                    </p>
                                                    <p>
                                                        FURTHER UNDERSTAND THAT
                                                        THE ISSUED ASSET(S)
                                                        IS/ARE FOR COMPANY USE
                                                        ONLY AND FAILTURE TO
                                                        COMPLY WITH THE COMPANY
                                                        POLICY AND PROCEDURES
                                                        WILL BE SUBJECTED TO
                                                        DISCIPLINARY ACTION.
                                                        WITH PROPER
                                                        INVESTIGATION, ANY
                                                        DAMAGES OR LOSS DUE TO
                                                        MY NEGLIGENCE WILL BE
                                                        AUTOMATICALLY CHARGED
                                                        AND/OR DEDUCTED TO MY
                                                        SALARY.
                                                    </p>
                                                </div>
<!-- 
                                                <div
                                                    class="flex flex-col w-full gap-4 mt-12 lg:flex-row md:flex-row"
                                                >
                                                    <div
                                                        class="flex-grow flex-col"
                                                    >
                                                        <p
                                                            class="text-sm tracking-tight font-bold uppercase"
                                                        >
                                                            Prepared by:
                                                        </p>
                                           
                                                        <div
                                                            class="flex-grow text-start"
                                                        >
                                                            <div
                                                                class="flex justify-start items-start"
                                                            >
                                                                <img
                                                                    src="assets/images/logo/signature.png"
                                                                    alt="Signature"
                                                                    class="mt-4 w-48 opacity-80"
                                                                />
                                                            </div>
                                                            <div
                                                                class="flex flex-row gap-8 -mt-10"
                                                            >
                                                          
                                                                <div
                                                                    class="flex flex-col items-start"
                                                                >
                                                                    <p
                                                                        class="text-md border-t m-1"
                                                                    >
                                                                        WILLIARD
                                                                        VARQUEZ
                                                                        PERNIA
                                                                        IV
                                                                    </p>
                                                                    <span
                                                                        class="text-sm text-gray-600 ml-16"
                                                                    >
                                                                        IT
                                                                        Manager
                                                                    </span>
                                                                </div>
                                                                <p
                                                                    class="text-sm tracking-tight font-bold uppercase mt-1.5"
                                                                >
                                                                    Date
                                                                    <span
                                                                        class="font-medium"
                                                                    >
                                                                        {{
                                                                            datenow
                                                                                ? (datenow
                                                                                  | date
                                                                                      : "MMMM d, y")
                                                                                : "N/A"
                                                                        }}</span
                                                                    >
                                                                </p>
                                                            </div>
                                                        </div>
                                                        <div
                                                            class="flex-grow text-start"
                                                        >
                                                            <div
                                                                class="flex justify-start items-start"
                                                            >
                                                                <img
                                                                    src="assets/images/logo/signature.png"
                                                                    alt="Signature"
                                                                    class="mt-4 w-48 opacity-80"
                                                                />
                                                            </div>
                                                            <div
                                                                class="flex flex-row gap-8 -mt-10"
                                                            >
                                                          
                                                                <div
                                                                    class="flex flex-col items-start"
                                                                >
                                                                    <p
                                                                        class="text-md border-t m-1"
                                                                    >
                                                                        IRISH
                                                                        MARGOT
                                                                        FLORES
                                                                        LUNGAY
                                                                    </p>
                                                                    <span
                                                                        class="text-sm text-gray-600 ml-4"
                                                                    >
                                                                        Lead,
                                                                        IT/ OT
                                                                        Operations
                                                                        (DA)
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div
                                                        class="flex-grow flex-col"
                                                    >
                                                     
                                                        <div
                                                            class="flex-grow text-start"
                                                        >
                                                            <div
                                                                class="flex flex-row gap-8"
                                                            >
                                                                <p
                                                                    class="text-sm tracking-tight font-bold uppercase"
                                                                >
                                                                    Received by:
                                                                </p>
                                                            </div>

                                                            <div
                                                                class="flex justify-start items-start mt-2"
                                                            >
                                                                <img
                                                                    src="assets/images/logo/signature.png"
                                                                    alt="Signature"
                                                                    class="mt-4 w-48 opacity-80"
                                                                />
                                                            </div>

                                                            <div
                                                                class="flex flex-row gap-12 -mt-10"
                                                            >
                                                                <div
                                                                    class="flex flex-col items-start"
                                                                >
                                                                    <p class="text-md border-t">
                                                                        {{ eventForm.get('name')?.value || 'N/A' }}
                                                             </p>
                                                             <span class="text-sm text-gray-600 mx-auto">
                                                                {{ eventForm.get('designation')?.value || 'N/A' }}
                                                             </span>
                                                                </div>
                                                                <p
                                                                    class="text-sm tracking-tight font-bold uppercase mt-1.5"
                                                                >
                                                                    Date
                                                                    <span
                                                                        class="font-medium"
                                                                    >
                                                                        {{
                                                                            datenow
                                                                                ? (datenow
                                                                                  | date
                                                                                      : "MMMM d, y")
                                                                                : "N/A"
                                                                        }}</span
                                                                    >
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div> -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- <button
                                    class="fixed bottom-4 right-4 bg-white shadow-lg flex items-center justify-center hover:bg-blue-50 p-2 rounded-full transition-colors"
                                    (click)="pdfForm()"
                                    matTooltip="Generate PDF form"
                                    aria-label="Generate PDF form"
                                    style="width: 56px; height: 56px"
                                >
                                    <img
                                        class="h-8 w-6"
                                        src="assets/images/svgs/pdf-svgrepo-com.svg"
                                    />
                                   
                                </button> -->
                            </div>
                        </ng-template>
                    </mat-tab>
                </mat-tab-group>

                <!-- Navigation - Desktop -->
                <!-- <div class="z-10 sticky hidden lg:flex bottom-4 p-4">
                    <div class="flex items-center justify-center mx-auto p-2 rounded-full shadow-lg bg-primary">
                        <button
                            class="flex-0"
                            mat-flat-button
                            [color]="'primary'"
                            (click)="goToPreviousStep()">
                            <mat-icon
                                class="mr-2"
                                [svgIcon]="'heroicons_outline:arrow-narrow-left'"></mat-icon>
                            <span class="mr-1">Prev</span>
                        </button>
                        <div class="flex items-center justify-center mx-2.5 font-medium leading-5 text-on-primary">
                            <span>{{currentStep + 1}}</span>
                            <span class="mx-0.5 text-hint">/</span>
                            <span>{{course.totalSteps}}</span>
                        </div>
                        <button
                            class="flex-0"
                            mat-flat-button
                            [color]="'primary'"
                            (click)="goToNextStep()">
                            <span class="ml-1">Next</span>
                            <mat-icon
                                class="ml-2"
                                [svgIcon]="'heroicons_outline:arrow-narrow-right'"></mat-icon>
                        </button>
                    </div>
                </div> -->
            </div>

            <!-- Progress & Navigation - Mobile -->
            <!-- <div class="lg:hidden flex items-center p-4 border-t bg-card">
                <button mat-icon-button (click)="matDrawer.toggle()">
                    <mat-icon
                        [svgIcon]="'heroicons_outline:view-list'"
                    ></mat-icon>
                </button>
                <div
                    class="flex items-center justify-center ml-1 lg:ml-2 font-medium leading-5"
                >
                    <span>{{ currentStep + 1 }}</span>
                    <span class="mx-0.5 text-hint">/</span>
                    <span>{{ course.totalSteps }}</span>
                </div>
                <mat-progress-bar
                    class="flex-auto ml-6 rounded-full"
                    [value]="(100 * (currentStep + 1)) / course.totalSteps"
                ></mat-progress-bar>
                <button
                    class="ml-4"
                    mat-icon-button
                    (click)="goToPreviousStep()"
                >
                    <mat-icon
                        [svgIcon]="'heroicons_outline:arrow-narrow-left'"
                    ></mat-icon>
                </button>
                <button class="ml-0.5" mat-icon-button (click)="goToNextStep()">
                    <mat-icon
                        [svgIcon]="'heroicons_outline:arrow-narrow-right'"
                    ></mat-icon>
                </button>
            </div> -->
        </mat-drawer-content>
    </mat-drawer-container>
</form>
