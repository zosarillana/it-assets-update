<!-- Add this loader somewhere in your template -->
<div  *ngIf="loading" class="loader">
    <img
        class="-mb-5"
        style="height: 65px; width: 65px"
        src="assets/images/logo/favicon-192x192.png"
        alt="It Assets Logo"
    />
    <div class="spinner w-16">
        <div class="bounce1"></div>
        <div class="bounce2"></div>
        <div class="bounce3"></div>
    </div>
</div>

<div *ngIf="asset">
    <form
        [formGroup]="eventForm"
        (ngSubmit)="updateAsset()"
        class="absolute inset-0 flex flex-col min-w-0 overflow-hidden"
    >
        <mat-drawer-container class="flex-auto h-full">
            <!-- Drawer -->
            <mat-drawer
                class="w-90 dark:bg-gray-900"
                [autoFocus]="false"
                [mode]="drawerMode"
                [opened]="drawerOpened"
                #matDrawer
            >
                <div class="flex flex-col items-start p-8 border-b">
                    <!-- Back to courses -->
                    <a
                        class="inline-flex items-center leading-6 text-primary hover:underline"
                        (click)="goBack()"
                    >
                        <span class="inline-flex items-center">
                            <mat-icon
                                class="icon-size-5 text-current"
                                [svgIcon]="'heroicons_solid:arrow-sm-left'"
                            ></mat-icon>
                            <span class="ml-1.5 font-medium leading-5"
                                >Go back</span
                            >
                        </span>
                    </a>
                    <!-- Course title & description -->
                    <div class="mt-7 text-2xl font-semibold">
                        Add Accountability
                    </div>
                    <div class="text-secondary">
                        Select a computer and fill the employee details to
                        create a accountability form.
                    </div>
                </div>

                <!-- Steps -->
                <div class="py-2 px-8">
                    <ol>
                        <mat-label class="font-semibold flex-col flex mb-4">
                            Update computer
                            <span class="text-sm font-medium text-gray-500">
                                Fill all the required fields to update computer
                            </span>
                        </mat-label>
                        <div
                            class="flex flex-col flex-grow uppercase"
                            style="width: 100%"
                        >
                            <!-- Make this div take full width -->
                            <mat-form-field
                                appearance="fill"
                                style="width: 100%"
                            >
                                <!-- Make mat-form-field take full width -->
                                <mat-label class="text-primary text-sm"
                                    >Serial Number</mat-label
                                >
                                <mat-icon
                                    svgIcon="feather:hash"
                                    class="icon-size-5"
                                ></mat-icon>
                                <input
                                    matInput
                                    id="serial_number"
                                    formControlName="serial_number"
                                    [placeholder]="asset?.serial_no || 'N/A'"
                                    [value]="eventForm.value.serial_number"
                                />
                            </mat-form-field>

                            <mat-form-field appearance="fill" class="w-full">
                                <mat-label class="text-sm">Type</mat-label>
                                <mat-icon
                                    svgIcon="feather:cpu"
                                    class="icon-size-5 mr-2"
                                ></mat-icon>
                                <mat-select formControlName="type" id="type">
                                    <mat-option
                                        *ngFor="let option of typeOptions"
                                        [value]="option"
                                    >
                                        {{ option }}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>

                            <mat-form-field appearance="fill" class="w-full">
                                <mat-label class="text-sm"
                                    >Date Acquired</mat-label
                                >
                                <mat-icon
                                    svgIcon="feather:calendar"
                                    class="icon-size-5 mr-2"
                                ></mat-icon>
                                <input
                                    matInput
                                    [matDatepicker]="picker"
                                    formControlName="date_acquired"
                                    id="date_acquired"
                                    [placeholder]="asset.date_acquired || 'N/A'"
                                />
                                <mat-datepicker-toggle
                                    matIconSuffix
                                    [for]="picker"
                                ></mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker>
                            </mat-form-field>

                            <mat-form-field appearance="fill" class="w-full">
                                <mat-label class="text-sm">Brand</mat-label>
                                <mat-icon
                                    svgIcon="feather:box"
                                    class="icon-size-5 mr-2"
                                ></mat-icon>
                                <input
                                    class="uppercase"
                                    formControlName="brand"
                                    matInput
                                    id="brand"
                                    [placeholder]="asset.brand || 'N/A'"
                                />
                            </mat-form-field>

                            <mat-form-field appearance="fill" class="w-full">
                                <mat-label class="text-sm">Model</mat-label>
                                <mat-icon
                                    svgIcon="feather:smartphone"
                                    class="icon-size-5 mr-2"
                                ></mat-icon>
                                <input
                                    class="uppercase"
                                    formControlName="model"
                                    matInput
                                    id="model"
                                    [placeholder]="asset.model || 'N/A'"
                                />
                            </mat-form-field>

                            <mat-form-field appearance="fill" class="w-full">
                                <mat-label class="text-sm">Size</mat-label>
                                <mat-icon
                                    svgIcon="feather:info"
                                    class="icon-size-5 mr-2"
                                ></mat-icon>
                                <input
                                    formControlName="size"
                                    matInput
                                    id="size"
                                    [placeholder]="asset.size || 'N/A'"
                                />
                            </mat-form-field>

                            <mat-form-field appearance="fill" class="w-full">
                                <mat-label class="text-sm">Color</mat-label>
                                <mat-icon
                                    svgIcon="feather:info"
                                    class="icon-size-5 mr-2"
                                ></mat-icon>
                                <input
                                    formControlName="color"
                                    matInput
                                    id="color"
                                    [placeholder]="asset.color || 'N/A'"
                                />
                            </mat-form-field>

                            <mat-form-field appearance="fill" class="w-full">
                                <mat-label class="text-sm">Po #</mat-label>
                                <mat-icon
                                    svgIcon="feather:tag"
                                    class="icon-size-5 mr-2"
                                ></mat-icon>
                                <input
                                    formControlName="po"
                                    matInput
                                    id="po"
                                    [placeholder]="asset.po || 'N/A'"
                                />
                            </mat-form-field>

                            <mat-form-field appearance="fill" class="w-full">
                                <mat-label class="text-sm">Warranty</mat-label>
                                <mat-icon
                                    svgIcon="feather:shield"
                                    class="icon-size-5 mr-2"
                                ></mat-icon>
                                <input
                                    formControlName="warranty"
                                    matInput
                                    id="warranty"
                                    [placeholder]="asset.warranty || 'N/A'"
                                />
                            </mat-form-field>

                            <mat-form-field appearance="fill" class="w-full">
                                <mat-label class="text-sm">Cost</mat-label>
                                <mat-icon
                                    svgIcon="feather:dollar-sign"
                                    class="icon-size-5 mr-2"
                                ></mat-icon>
                                <input
                                    formControlName="cost"
                                    matInput
                                    id="cost"
                                    [placeholder]="asset.cost || 'N/A'"
                                />
                            </mat-form-field>
                            <button
                            class="px-6"
                            mat-flat-button
                            type="submit"
                            [color]="'primary'"
                        >
                            <mat-icon
                                class="icon-size-4"
                                svgIcon="mat_solid:subdirectory_arrow_right"
                            ></mat-icon>
                            <span class="ml-1 text-sm"> Save changes</span>
                        </button>
                        </div>
                        
                    </ol>
                </div>
            </mat-drawer>

            <!-- Drawer content -->
            <mat-drawer-content class="flex flex-col overflow-hidden">
                <!-- Header -->
                <div
                    class="lg:hidden flex flex-0 items-center py-2 pl-4 pr-6 sm:py-4 md:pl-6 md:pr-8 border-b lg:border-b-0 bg-card dark:bg-transparent"
                >
                    <!-- Title & Actions -->
                    <button mat-icon-button [routerLink]="['..']">
                        <mat-icon
                            [svgIcon]="'heroicons_outline:arrow-sm-left'"
                        ></mat-icon>
                    </button>
                    <h2
                        class="ml-2.5 text-md sm:text-xl font-medium tracking-tight truncate"
                    >
                        Accountability Details
                    </h2>
                </div>
                <mat-progress-bar
                    class="hidden lg:block flex-0 h-0.5 w-full"
                ></mat-progress-bar>

                <!-- Main -->
                <div class="flex-auto overflow-y-auto" cdkScrollable>
                    <!-- Steps -->
                    <mat-tab-group
                        class="fuse-mat-no-header"
                        [animationDuration]="'200'"
                        #courseSteps
                    >
                        <mat-tab>
                            <ng-template matTabContent>
                                <div
                                    class="mx-auto inset-0 min-w-0 text-center overflow-auto print:overflow-visible"
                                    cdkScrollable
                                >
                                    <!-- A4 Wrapper -->
                                    <div class="a4-container">
                                        <!-- Page Content -->
                                        <div
                                            class="inline-block p-6 sm:p-10 text-left print:p-0"
                                        >
                                            <div
                                                class="w-240 min-w-240 p-16 rounded-2xl shadow bg-card print:w-auto print:p-0 print:rounded-none print:shadow-none print:bg-transparent"
                                            >
                                                <div
                                                    id="pdfFormArea"
                                                    #pdfFormArea
                                                >
                                                    <div class="flex">
                                                        <div
                                                            class="flex flex-row gap-4 w-full"
                                                        >
                                                            <div
                                                                class="flex gap-4"
                                                            >
                                                                <img
                                                                    src="assets/images/logo/suylogo.png"
                                                                    alt="Logo"
                                                                    class="-ml-5 -mt-5 h-32 w-32"
                                                                />
                                                                <div
                                                                    class="flex flex-col w-64 gap-1"
                                                                >
                                                                    <p
                                                                        class="font-bold text-sm"
                                                                    >
                                                                        Ana's
                                                                        Breeders
                                                                        Farm
                                                                        Inc.
                                                                    </p>
                                                                    <p
                                                                        class="text-sm w-56"
                                                                    >
                                                                        Sitio
                                                                        Sto.
                                                                        Niño,
                                                                        Pan
                                                                        Philippine
                                                                        Highway
                                                                        Brgy.
                                                                        Binugao,
                                                                        Toril
                                                                        District
                                                                        Davao
                                                                        City,
                                                                        Davao
                                                                        del Sur,
                                                                        Philippines.
                                                                    </p>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!-- Right-aligned Document Details -->
                                                        <div
                                                            class="flex flex-row gap-4 w-full justify-end"
                                                        >
                                                            <div
                                                                class="flex flex-col w-64 gap-1 items-end"
                                                            >
                                                                <p
                                                                    class="font-bold text-sm"
                                                                >
                                                                    Document
                                                                    Number
                                                                    <span
                                                                        class="font-medium"
                                                                        >A-60-FR-009</span
                                                                    >
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <mat-divider
                                                        class="my-4"
                                                    ></mat-divider>
                                                    <div
                                                        class="flex flex-row mt-2 gap-4 uppercase"
                                                    >
                                                        <img
                                                            src="https://pngimg.com/uploads/qr_code/small/qr_code_PNG7.png"
                                                            alt="Sample QR"
                                                            class="h-32 w-32"
                                                        />
                                                        <div
                                                            class="flex flex-col sm:flex-row justify-between gap-2"
                                                        >
                                                            <div
                                                                class="flex flex-col"
                                                            >
                                                                <p
                                                                    class="text-primary font-bold text-2xl"
                                                                >
                                                                    {{
                                                                        asset.asset_barcode ||
                                                                            "N/A"
                                                                    }}
                                                                </p>
                                                                <p
                                                                    class="text-secondary"
                                                                >
                                                                    Serial
                                                                    number:
                                                                    {{
                                                                        asset.serial_no ||
                                                                            "N/A"
                                                                    }}
                                                                </p>
                                                            </div>
                                                            <mat-divider
                                                                class="mx-12"
                                                                vertical
                                                            ></mat-divider>
                                                            <div
                                                                class="flex flex-col"
                                                            >
                                                                <p
                                                                    class="text-primary font-bold text-lg"
                                                                >
                                                                    Long Item
                                                                    Description
                                                                </p>
                                                                <p
                                                                    class="text-secondary"
                                                                >
                                                                    {{
                                                                        asset.type +
                                                                            " " +
                                                                            asset.brand +
                                                                            " " +
                                                                            asset.model +
                                                                            " " +
                                                                            asset.size +
                                                                            " " +
                                                                            asset.color
                                                                    }}
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <mat-divider
                                                        class="mt-6 mb-10"
                                                    ></mat-divider>
                                                    <p
                                                        class="text-lg font-medium mb-3"
                                                    >
                                                        DETAILS
                                                    </p>

                                                    <div
                                                        class="grid grid-cols-3 gap-4 uppercase"
                                                    >
                                                        <p
                                                            class="flex flex-col font-medium text-medium"
                                                        >
                                                            Serial number
                                                            <span
                                                                class="text-secondary text-medium"
                                                            >
                                                                <mat-icon
                                                                    svgIcon="feather:hash"
                                                                    class="icon-size-3"
                                                                ></mat-icon>
                                                                {{
                                                                    asset.serial_no ||
                                                                        "N/A"
                                                                }}
                                                            </span>
                                                        </p>
                                                        <p
                                                            class="flex flex-col font-medium text-medium"
                                                        >
                                                            Type
                                                            <span
                                                                class="text-secondary text-medium"
                                                            >
                                                                <mat-icon
                                                                    svgIcon="feather:cpu"
                                                                    class="icon-size-3"
                                                                ></mat-icon>
                                                                {{
                                                                    asset.type ||
                                                                        "N/A"
                                                                }}
                                                            </span>
                                                        </p>
                                                        <p
                                                            class="flex flex-col font-medium text-medium"
                                                        >
                                                            Date Acquired
                                                            <span
                                                                class="text-secondary text-medium"
                                                            >
                                                                <mat-icon
                                                                    svgIcon="feather:calendar"
                                                                    class="icon-size-3"
                                                                ></mat-icon>
                                                                {{
                                                                    asset.date_acquired ||
                                                                        "N/A"
                                                                }}
                                                            </span>
                                                        </p>
                                                        <p
                                                            class="flex flex-col font-medium text-medium"
                                                        >
                                                            Brand
                                                            <span
                                                                class="text-secondary text-medium"
                                                            >
                                                                <mat-icon
                                                                    svgIcon="feather:box"
                                                                    class="icon-size-3"
                                                                ></mat-icon>
                                                                {{
                                                                    asset.brand ||
                                                                        "N/A"
                                                                }}
                                                            </span>
                                                        </p>
                                                        <p
                                                            class="flex flex-col font-medium text-medium"
                                                        >
                                                            Model
                                                            <span
                                                                class="text-secondary text-medium"
                                                            >
                                                                <mat-icon
                                                                    svgIcon="feather:smartphone"
                                                                    class="icon-size-3"
                                                                ></mat-icon>
                                                                {{
                                                                    asset.model ||
                                                                        "N/A"
                                                                }}
                                                            </span>
                                                        </p>
                                                        <p
                                                            class="flex flex-col font-medium text-medium"
                                                        >
                                                            Size
                                                            <span
                                                                class="text-secondary text-medium"
                                                            >
                                                                <mat-icon
                                                                    svgIcon="feather:info"
                                                                    class="icon-size-3"
                                                                ></mat-icon>
                                                                {{
                                                                    asset.size ||
                                                                        "N/A"
                                                                }}
                                                            </span>
                                                        </p>

                                                        <p
                                                            class="flex flex-col font-medium text-medium"
                                                        >
                                                            Color
                                                            <span
                                                                class="text-secondary text-medium"
                                                            >
                                                                <mat-icon
                                                                    svgIcon="feather:info"
                                                                    class="icon-size-3"
                                                                ></mat-icon>
                                                                {{
                                                                    asset.color ||
                                                                        "N/A"
                                                                }}
                                                            </span>
                                                        </p>
                                                        <p
                                                            class="flex flex-col font-medium text-medium"
                                                        >
                                                            Po #
                                                            <span
                                                                class="text-secondary text-medium"
                                                            >
                                                                <mat-icon
                                                                    svgIcon="feather:tag"
                                                                    class="icon-size-3"
                                                                ></mat-icon>
                                                                {{
                                                                    asset.po ||
                                                                        "N/A"
                                                                }}
                                                            </span>
                                                        </p>
                                                        <p
                                                            class="flex flex-col font-medium text-medium"
                                                        >
                                                            Warranty
                                                            <span
                                                                class="text-secondary text-medium"
                                                            >
                                                                <mat-icon
                                                                    svgIcon="feather:shield"
                                                                    class="icon-size-3"
                                                                ></mat-icon>
                                                                {{
                                                                    asset.warranty ||
                                                                        "N/A"
                                                                }}
                                                            </span>
                                                        </p>
                                                        <p
                                                            class="flex flex-col font-medium text-medium"
                                                        >
                                                            Cost
                                                            <span
                                                                class="text-secondary text-medium"
                                                            >
                                                                <mat-icon
                                                                    svgIcon="feather:dollar-sign"
                                                                    class="icon-size-3"
                                                                ></mat-icon>
                                                                {{
                                                                    asset.cost ||
                                                                        "N/A"
                                                                }}
                                                            </span>
                                                        </p>
                                                        <p
                                                            class="flex flex-col font-medium text-medium"
                                                        >
                                                            Remarks
                                                            <span
                                                                class="text-secondary text-medium"
                                                            >
                                                                <mat-icon
                                                                    svgIcon="feather:file-text"
                                                                    class="icon-size-3"
                                                                ></mat-icon>
                                                                {{
                                                                    asset.remarks ||
                                                                        "N/A"
                                                                }}
                                                            </span>
                                                        </p>
                                                    </div>
                                                    <mat-divider
                                                        class="border-gray-300 my-4"
                                                    ></mat-divider>
                                                    <div class="uppercase">
                                                        <p
                                                            class="text-sm font-medium mt-5"
                                                        >
                                                            Current Owner
                                                            Details
                                                        </p>
                                                        <p
                                                            class="text-sm text-secondary mb-6"
                                                        >
                                                            Current owner of the
                                                            asset details.
                                                        </p>

                                                        <!-- Responsive Owner Details Section -->
                                                        <div
                                                            class="flex flex-col sm:flex-row gap-4"
                                                        >
                                                            <div
                                                                class="flex flex-col flex-grow gap-4"
                                                            >
                                                                <p
                                                                    class="text-sm flex flex-col font-medium text-medium"
                                                                >
                                                                    Owner Name
                                                                    <span
                                                                        class="text-sm text-secondary text-medium"
                                                                    >
                                                                        {{
                                                                            asset
                                                                                .owner
                                                                                ?.name ||
                                                                                "N/A"
                                                                        }}
                                                                    </span>
                                                                </p>
                                                                <p
                                                                    class="text-sm flex flex-col font-medium text-medium"
                                                                >
                                                                    Business Unit
                                                                    <span
                                                                        class="text-sm text-secondary text-medium"
                                                                    >
                                                                        {{
                                                                            asset
                                                                                .owner
                                                                                ?.company ||
                                                                                "N/A"
                                                                        }}
                                                                    </span>
                                                                </p>
                                                                <p
                                                                    class="text-sm flex flex-col font-medium text-medium"
                                                                >
                                                                    Department
                                                                    <span
                                                                        class="text-sm text-secondary text-medium"
                                                                    >
                                                                        {{
                                                                            asset
                                                                                .owne
                                                                                ?.department ||
                                                                                "N/A"
                                                                        }}
                                                                    </span>
                                                                </p>
                                                            </div>
                                                            <div
                                                                class="flex flex-col flex-grow gap-4"
                                                            >
                                                                <p
                                                                    class="text-sm flex flex-col font-medium text-medium"
                                                                >
                                                                    Employee ID
                                                                    <span
                                                                        class="text-sm text-secondary text-medium"
                                                                    >
                                                                        {{
                                                                            asset
                                                                                .owner
                                                                                ?.employee_id ||
                                                                                "N/A"
                                                                        }}
                                                                    </span>
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-template>
                        </mat-tab>
                    </mat-tab-group>
                </div>
            </mat-drawer-content>
        </mat-drawer-container>
    </form>
</div>
