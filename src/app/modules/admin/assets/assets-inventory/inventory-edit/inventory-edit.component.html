<div  *ngIf="loading" class="loader">
    <img
        class="-mb-5"
        style="height: 65px; width: 65px"
        src="assets/images/logo/favicon-192x192.png"
        alt="It Assets Logo"
    />
    <div class="spinner w-16">
        <div class="bounce1"></div>
        <div class="bounce2"></div>
        <div class="bounce3"></div>
    </div>
</div>

<div *ngIf="asset">
    <form
        [formGroup]="eventForm"
        (ngSubmit)="updateAsset()"
        class="absolute inset-0 flex flex-col min-w-0 overflow-hidden"
    >
        <mat-drawer-container class="flex-auto h-full">
            <!-- Drawer -->
            <mat-drawer
                class="w-90 dark:bg-gray-900"
                [autoFocus]="false"
                [mode]="drawerMode"
                [opened]="drawerOpened"
                #matDrawer
            >
                <div class="flex flex-col items-start p-8 border-b">
                    <!-- Back to courses -->
                    <a
                        class="inline-flex items-center leading-6 text-primary hover:underline"
                        (click)="goBack()"
                    >
                        <span class="inline-flex items-center">
                            <mat-icon
                                class="icon-size-5 text-current"
                                [svgIcon]="'heroicons_solid:arrow-sm-left'"
                            ></mat-icon>
                            <span class="ml-1.5 font-medium leading-5"
                                >Go back</span
                            >
                        </span>
                    </a>
                    <!-- Course title & description -->
                    <div class="mt-7 text-2xl font-semibold">
                        Edit Peripheral
                    </div>
                    <div class="text-secondary">
                        Fill the fields you want to uodate in the selected
                        peripheral.
                    </div>
                </div>

                <!-- Steps -->
                <div class="py-2 px-8">
                    <ol>
                        <div class="mt-2 flex flex-col gap-2">
                            <mat-label class="font-semibold flex-col flex">
                                Fill the fields
                                <span class="text-sm font-medium text-gray-500">
                                    Fill all the required fields to update
                                    peripheral
                                </span>
                            </mat-label>

                            <mat-form-field
                                appearance="fill"
                                style="width: 100%"
                            >
                                <!-- Make mat-form-field take full width -->
                                <mat-label
                                    class="text-primary text-md"
                                    >Serial Number</mat-label
                                >
                                <mat-icon
                                    svgIcon="feather:hash"
                                    class="icon-size-5"
                                ></mat-icon>
                                <input
                                    matInput
                                    id="serial_number"
                                    [placeholder]="asset.serial_no || 'N/A'"
                                    formControlName="serial_number"
                                />
                            </mat-form-field>

                            <mat-form-field appearance="fill" class="w-full">
                                <mat-label class="text-sm">Type</mat-label>
                                <mat-icon
                                    svgIcon="feather:cpu"
                                    class="icon-size-5 mr-2"
                                ></mat-icon>
                                <input
                                    matInput
                                    id="type"
                                    [placeholder]="asset.type || 'N/A'"
                                    formControlName="type"
                                />
                            </mat-form-field>

                            <mat-form-field appearance="fill" class="w-full">
                                <mat-label class="text-sm">Date Acquired</mat-label>
                                <mat-icon
                                    svgIcon="feather:calendar"
                                    class="icon-size-5 mr-2"
                                ></mat-icon>
                                <input
                                    matInput
                                    [matDatepicker]="picker"
                                    id="date_acquired"
                                    [placeholder]="asset.date_acquired || 'N/A'"
                                    formControlName="date_acquired"
                                />
                                <mat-datepicker-toggle
                                    matIconSuffix
                                    [for]="picker"
                                ></mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker>
                            </mat-form-field>

                            <mat-form-field appearance="fill" class="w-full">
                                <mat-label class="text-sm">Brand</mat-label>
                                <mat-icon
                                    svgIcon="feather:box"
                                    class="icon-size-5 mr-2"
                                ></mat-icon>
                                <input
                                    formControlName="brand"
                                    matInput
                                    id="brand"
                                    [placeholder]="asset.brand || 'N/A'"
                                />
                            </mat-form-field>

                            <mat-form-field appearance="fill" class="w-full">
                                <mat-label class="text-sm">Model</mat-label>
                                <mat-icon
                                    svgIcon="feather:smartphone"
                                    class="icon-size-5 mr-2"
                                ></mat-icon>
                                <input
                                    matInput
                                    id="model"
                                    [placeholder]="asset.model || 'N/A'"
                                    formControlName="model"
                                />
                            </mat-form-field>

                            <mat-form-field appearance="fill" class="w-full">
                                <mat-label class="text-sm">Po #</mat-label>
                                <mat-icon
                                    svgIcon="feather:tag"
                                    class="icon-size-5 mr-2"
                                ></mat-icon>
                                <input
                                    formControlName="po"
                                    matInput
                                    id="po"
                                    placeholder="N/A"
                                />
                            </mat-form-field>

                            <mat-form-field appearance="fill" class="w-full">
                                <mat-label class="text-sm">Warranty</mat-label>
                                <mat-icon
                                    svgIcon="feather:shield"
                                    class="icon-size-5 mr-2"
                                ></mat-icon>
                                <input
                                    matInput
                                    id="warranty"
                                    placeholder="N/A"
                                    formControlName="warranty"
                                />
                            </mat-form-field>

                            <mat-form-field appearance="fill" class="w-full">
                                <mat-label class="text-sm">Cost</mat-label>
                                <mat-icon
                                    svgIcon="feather:dollar-sign"
                                    class="icon-size-5 mr-2"
                                ></mat-icon>
                                <input
                                    matInput
                                    id="cost"
                                    [placeholder]="asset.cost || 'N/A'"
                                    formControlName="cost"
                                />
                            </mat-form-field>

                            <button
                                class="px-6"
                                mat-flat-button
                                type="submit"
                                [color]="'primary'"
                            >
                                <mat-icon
                                    class="icon-size-4"
                                    svgIcon="mat_solid:subdirectory_arrow_right"
                                ></mat-icon>
                                <span class="ml-1 text-sm"> Save changes</span>
                            </button>
                        </div>
                    </ol>
                </div>
            </mat-drawer>

            <!-- Drawer content -->
            <mat-drawer-content class="flex flex-col overflow-hidden">
                <!-- Header -->
                <div
                    class="lg:hidden flex flex-0 items-center py-2 pl-4 pr-6 sm:py-4 md:pl-6 md:pr-8 border-b lg:border-b-0 bg-card dark:bg-transparent"
                >
                    <!-- Title & Actions -->
                    <button mat-icon-button [routerLink]="['..']">
                        <!-- <mat-icon
                            [svgIcon]="'heroicons_outline:arrow-sm-left'"
                        ></mat-icon> -->
                    </button>
                    <h2
                        class="ml-2.5 text-md sm:text-xl font-medium tracking-tight truncate"
                    >
                        Accountability Details
                    </h2>
                </div>
                <mat-progress-bar
                    class="hidden lg:block flex-0 h-0.5 w-full"
                ></mat-progress-bar>

                <!-- Main -->
                <div class="flex-auto overflow-y-auto" cdkScrollable>
                    <!-- Steps -->
                    <mat-tab-group
                        class="fuse-mat-no-header"
                        [animationDuration]="'200'"
                        #courseSteps
                    >
                        <mat-tab>
                            <ng-template matTabContent>
                                <div
                                    class="mx-auto inset-0 min-w-0 text-center overflow-auto print:overflow-visible"
                                    cdkScrollable
                                >
                                    <!-- A4 Wrapper -->
                                    <div class="a4-container">
                                        <!-- Page Content -->
                                        <div
                                            class="inline-block p-6 sm:p-10 text-left print:p-0"
                                        >
                                            <div
                                                class="w-240 min-w-240 p-16 rounded-2xl shadow bg-card print:w-auto print:p-0 print:rounded-none print:shadow-none print:bg-transparent"
                                            >
                                                <div
                                                    id="pdfFormArea"
                                                    #pdfFormArea
                                                >
                                                    <div class="flex">
                                                        <div
                                                            class="flex flex-row gap-4 w-full"
                                                        >
                                                            <div
                                                                class="flex gap-4"
                                                            >
                                                                <img
                                                                    src="assets/images/logo/suylogo.png"
                                                                    alt="Logo"
                                                                    class="-ml-5 -mt-5 h-32 w-32"
                                                                />
                                                                <div
                                                                    class="flex flex-col w-64 gap-1"
                                                                >
                                                                    <p
                                                                        class="font-bold text-sm"
                                                                    >
                                                                        Ana's
                                                                        Breeders
                                                                        Farm
                                                                        Inc.
                                                                    </p>
                                                                    <p
                                                                        class="text-sm w-56"
                                                                    >
                                                                        Sitio
                                                                        Sto.
                                                                        Ni√±o,
                                                                        Pan
                                                                        Philippine
                                                                        Highway
                                                                        Brgy.
                                                                        Binugao,
                                                                        Toril
                                                                        District
                                                                        Davao
                                                                        City,
                                                                        Davao
                                                                        del Sur,
                                                                        Philippines.
                                                                    </p>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!-- Right-aligned Document Details -->
                                                        <div
                                                            class="flex flex-row gap-4 w-full justify-end"
                                                        >
                                                            <div
                                                                class="flex flex-col w-64 gap-1 items-end"
                                                            >
                                                                <p
                                                                    class="font-bold text-sm"
                                                                >
                                                                    Document
                                                                    Number
                                                                    <span
                                                                        class="font-medium"
                                                                        >A-60-FR-009</span
                                                                    >
                                                                </p>
                                                                <p
                                                                    class="font-bold text-sm"
                                                                >
                                                                    Effective
                                                                    Date
                                                                    <span
                                                                        class="font-medium"
                                                                        >{{
                                                                            asset.date_created
                                                                                ? (asset.date_created
                                                                                  | date
                                                                                      : "MMMM d, y")
                                                                                : "N/A"
                                                                        }}</span
                                                                    >
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <mat-divider
                                                        class="border"
                                                    ></mat-divider>
                                                    <!-- <p
                                                        class="flex justify-center text-2xl font-semibold w-full"
                                                    >
                                                        PERIPHERAL FORM
                                                    </p> -->
                                                    <div
                                                        class="mt-5 w-full flex flex-row gap-12"
                                                    >
                                                        <div>
                                                            <img
                                                                id="preview-image"
                                                                src="https://static.vecteezy.com/system/resources/thumbnails/022/059/000/small_2x/no-image-available-icon-vector.jpg"
                                                                alt="Select Image"
                                                                class="h-42 w-36 object-contain border border-gray-300 rounded-md"
                                                            />
                                                        </div>

                                                        <div
                                                            class="grid grid-cols-2 w-full uppercase"
                                                        >
                                                            <div
                                                                class="columnDivider"
                                                            >
                                                                <p
                                                                    class="text-sm md:text-md font-bold text-primary"
                                                                >
                                                                    Asset
                                                                    barcode
                                                                </p>
                                                                <div
                                                                    class="flex justify-start items-start gap-2"
                                                                >
                                                                    <span>
                                                                        {{
                                                                            this
                                                                                .eventForm
                                                                                .value
                                                                                .asset_barcode ||
                                                                                "N/A"
                                                                        }}
                                                                    </span>
                                                                </div>
                                                            </div>

                                                            <div>
                                                                <p
                                                                    class="text-sm md:text-md font-bold text-primary"
                                                                >
                                                                    Serial
                                                                    number
                                                                </p>
                                                                <div
                                                                    class="flex justify-start items-start gap-2"
                                                                >
                                                                    <span>
                                                                        {{
                                                                            this
                                                                                .eventForm
                                                                                .value
                                                                                .serial_number ||
                                                                                "N/A"
                                                                        }}
                                                                    </span>
                                                                </div>
                                                            </div>
                                                            <div
                                                                class="columnDivider"
                                                            >
                                                                <p
                                                                    class="text-sm md:text-md font-bold text-primary"
                                                                >
                                                                    Long Item
                                                                    Description
                                                                </p>
                                                                <div
                                                                    class="flex justify-start items-start gap-2"
                                                                >
                                                                    <span>
                                                                        {{
                                                                            (eventForm
                                                                                .value
                                                                                .type
                                                                                ? eventForm
                                                                                      .value
                                                                                      .type +
                                                                                  " "
                                                                                : "") +
                                                                                (eventForm
                                                                                    .value
                                                                                    .brand
                                                                                    ? eventForm
                                                                                          .value
                                                                                          .brand +
                                                                                      " "
                                                                                    : "") +
                                                                                (eventForm
                                                                                    .value
                                                                                    .model
                                                                                    ? eventForm
                                                                                          .value
                                                                                          .model
                                                                                    : "") ||
                                                                                "N/A"
                                                                        }}
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <mat-divider
                                                    horizontal
                                                    class="border-gray-300 my-4"
                                                ></mat-divider>
                                                <div
                                                    class="grid grid-cols-4 w-full mt-2 uppercase gap-7"
                                                >
                                                    <div>
                                                        <p
                                                            class="text-md font-semibold"
                                                        >
                                                            Type
                                                        </p>
                                                        <span>
                                                            {{
                                                                this.eventForm
                                                                    .value
                                                                    .type ||
                                                                    "N/A"
                                                            }}
                                                        </span>
                                                    </div>
                                                    <div>
                                                        <p
                                                            class="text-md font-semibold"
                                                        >
                                                            Brand
                                                        </p>
                                                        <span>
                                                            {{
                                                                this.eventForm
                                                                    .value
                                                                    .brand ||
                                                                    "N/A"
                                                            }}
                                                        </span>
                                                    </div>
                                                    <div>
                                                        <p
                                                            class="text-md font-semibold"
                                                        >
                                                            Model
                                                        </p>
                                                        <span>
                                                            {{
                                                                this.eventForm
                                                                    .value
                                                                    .model ||
                                                                    "N/A"
                                                            }}
                                                        </span>
                                                    </div>
                                                    <div>
                                                        <p
                                                            class="text-md font-semibold"
                                                        >
                                                            Po Number
                                                        </p>
                                                        <span>
                                                            {{
                                                                this.eventForm
                                                                    .value
                                                                    .po_number ||
                                                                    "N/A"
                                                            }}
                                                        </span>
                                                    </div>

                                                    <div>
                                                        <p
                                                            class="text-md font-semibold"
                                                        >
                                                            Cost
                                                        </p>
                                                        <span>
                                                            {{
                                                                this.eventForm
                                                                    .value
                                                                    .cost ||
                                                                    "N/A"
                                                            }}
                                                        </span>
                                                    </div>

                                                    <div>
                                                        <p
                                                            class="text-md font-semibold"
                                                        >
                                                            Warranty
                                                        </p>
                                                        <span>
                                                            {{
                                                                this.eventForm
                                                                    .value
                                                                    .warranty ||
                                                                    "N/A"
                                                            }}
                                                        </span>
                                                    </div>
                                                    <div>
                                                        <p
                                                            class="text-md font-semibold"
                                                        >
                                                            Date Acquired
                                                        </p>
                                                        <span>
                                                            {{
                                                                eventForm.value
                                                                    .date_acquired
                                                                    ? (eventForm
                                                                          .value
                                                                          .date_acquired
                                                                      | date
                                                                          : "MMMM d, y")
                                                                    : "N/A"
                                                            }}
                                                        </span>
                                                    </div>
                                                    <div>
                                                        <p
                                                            class="text-md font-semibold"
                                                        >
                                                            Remarks
                                                        </p>
                                                        <span>
                                                            {{
                                                                this.eventForm
                                                                    .value
                                                                    .remarks ||
                                                                    "N/A"
                                                            }}
                                                        </span>
                                                    </div>
                                                </div>
                                                <mat-divider
                                                    class="my-4"
                                                ></mat-divider>
                                                <div class="uppercase">
                                                    <p
                                                        class="text-md font-semibold"
                                                    >
                                                        Current Owner Details
                                                    </p>
                                                    <p
                                                        class="text-md text-secondary mb-6"
                                                    >
                                                        Current owner of the
                                                        asset details.
                                                    </p>

                                                    <!-- Responsive Owner Details Section -->
                                                    <div
                                                        class="grid grid-cols-1 lg:grid-cols-2 gap-4"
                                                    >
                                                        <div
                                                            class="flex flex-col flex-grow gap-4"
                                                        >
                                                            <p
                                                                class="text-md flex flex-col font-semibold text-medium"
                                                            >
                                                                Owner Name
                                                                <span
                                                                    class="text-md text-secondary font-medium text-medium"
                                                                >
                                                                    {{
                                                                        asset
                                                                            .owner
                                                                            ?.name ||
                                                                            "N/A"
                                                                    }}
                                                                </span>
                                                            </p>
                                                           
                                                        </div>
                                                        <div
                                                            class="flex flex-col flex-grow gap-4"
                                                        >
                                                        <p
                                                        class="text-md flex flex-col font-semibold text-medium"
                                                    >
                                                        Business Unit
                                                        <span
                                                            class="text-md text-secondary font-medium text-medium"
                                                        >
                                                            {{
                                                                asset
                                                                    .owner
                                                                    ?.company ||
                                                                    "N/A"
                                                            }}
                                                        </span>
                                                    </p></div>
                                                        <div
                                                            class="flex flex-col flex-grow gap-4"
                                                        >
                                                            <p
                                                                class="text-md flex flex-col font-semibold text-medium"
                                                            >
                                                                Department
                                                                <span
                                                                    class="text-md text-secondary font-medium text-medium"
                                                                >
                                                                    {{
                                                                        asset
                                                                            .owner
                                                                            ?.department ||
                                                                            "N/A"
                                                                    }}
                                                                </span>
                                                            </p>
                                                        </div>
                                                        <div
                                                            class="flex flex-col flex-grow gap-4"
                                                        >
                                                            <p
                                                                class="text-md flex flex-col font-semibold text-medium"
                                                            >
                                                                Employee ID
                                                                <span
                                                                    class="text-md text-secondary font-medium text-medium"
                                                                >
                                                                    {{
                                                                        asset
                                                                            .owner
                                                                            ?.employee_id ||
                                                                            "N/A"
                                                                    }}
                                                                </span>
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-template>
                        </mat-tab>
                    </mat-tab-group>
                </div>
            </mat-drawer-content>
        </mat-drawer-container>
    </form>
</div>
